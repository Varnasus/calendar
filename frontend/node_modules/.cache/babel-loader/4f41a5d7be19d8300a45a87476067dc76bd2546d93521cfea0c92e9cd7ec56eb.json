{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\zvarn\\\\Desktop\\\\Projects\\\\frontend\\\\src\\\\components\\\\DraggableModal.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport './Modal.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction DraggableModal({\n  children,\n  onClose,\n  position\n}) {\n  _s();\n  const [isEditMode, setIsEditMode] = useState(false);\n  const [modalPosition, setModalPosition] = useState(() => {\n    // Calculate initial position to cascade multiple modals\n    const baseOffset = 50;\n    const openModals = document.querySelectorAll('.modal').length;\n    return {\n      x: (position === null || position === void 0 ? void 0 : position.x) || baseOffset + openModals * 20,\n      y: (position === null || position === void 0 ? void 0 : position.y) || baseOffset + openModals * 20\n    };\n  });\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragStart, setDragStart] = useState({\n    x: 0,\n    y: 0\n  });\n  const modalRef = useRef(null);\n  useEffect(() => {\n    var _modalRef$current;\n    // Bring modal to front when clicked\n    const handleClick = () => {\n      const modals = document.querySelectorAll('.modal');\n      const maxZIndex = Array.from(modals).reduce((max, modal) => Math.max(max, parseInt(modal.style.zIndex || 1000)), 1000);\n      if (modalRef.current) {\n        modalRef.current.style.zIndex = maxZIndex + 1;\n      }\n    };\n    (_modalRef$current = modalRef.current) === null || _modalRef$current === void 0 ? void 0 : _modalRef$current.addEventListener('mousedown', handleClick);\n    return () => {\n      var _modalRef$current2;\n      return (_modalRef$current2 = modalRef.current) === null || _modalRef$current2 === void 0 ? void 0 : _modalRef$current2.removeEventListener('mousedown', handleClick);\n    };\n  }, []);\n  const handleMouseDown = e => {\n    if (e.target.closest('.modal-content')) return;\n    setIsDragging(true);\n    setDragStart({\n      x: e.clientX - modalPosition.x,\n      y: e.clientY - modalPosition.y\n    });\n  };\n  const handleMouseMove = e => {\n    if (!isDragging) return;\n    const newX = e.clientX - dragStart.x;\n    const newY = e.clientY - dragStart.y;\n\n    // Keep modal within viewport bounds\n    const modalRect = modalRef.current.getBoundingClientRect();\n    const maxX = window.innerWidth - modalRect.width;\n    const maxY = window.innerHeight - modalRect.height;\n    setModalPosition({\n      x: Math.min(Math.max(0, newX), maxX),\n      y: Math.min(Math.max(0, newY), maxY)\n    });\n  };\n  const handleMouseUp = () => {\n    setIsDragging(false);\n  };\n  const handleDetach = () => {\n    const modalFeatures = 'width=600,height=600,left=200,top=200';\n    const newWindow = window.open('', '_blank', modalFeatures);\n    newWindow.document.write(`\n      <html>\n        <head>\n          <title>Content Details</title>\n          <link rel=\"stylesheet\" href=\"${window.location.origin}/modal.css\">\n          ${document.head.innerHTML}\n        </head>\n        <body>\n          <div id=\"modal-root\"></div>\n        </body>\n      </html>\n    `);\n    const modalContent = modalRef.current.querySelector('.modal-content').cloneNode(true);\n    newWindow.document.getElementById('modal-root').appendChild(modalContent);\n    onClose();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: modalRef,\n    className: \"modal\",\n    style: {\n      left: modalPosition.x,\n      top: modalPosition.y,\n      cursor: isDragging ? 'grabbing' : 'grab'\n    },\n    onMouseDown: handleMouseDown,\n    onMouseMove: handleMouseMove,\n    onMouseUp: handleMouseUp,\n    onMouseLeave: handleMouseUp,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-header\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"modal-control-button\",\n          onClick: () => setIsEditMode(!isEditMode),\n          title: isEditMode ? \"Save\" : \"Edit\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: `fas fa-${isEditMode ? 'save' : 'edit'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"modal-control-button\",\n          onClick: handleDetach,\n          title: \"Open in new window\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-external-link-alt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"modal-control-button\",\n          onClick: onClose,\n          title: \"Close\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-times\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-content\",\n      children: React.Children.map(children, child => /*#__PURE__*/React.cloneElement(child, {\n        isEditMode\n      }))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n_s(DraggableModal, \"s04R0RJcy6Z3VO8liZJhtrIqmL4=\");\n_c = DraggableModal;\nexport default DraggableModal;\nvar _c;\n$RefreshReg$(_c, \"DraggableModal\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","DraggableModal","children","onClose","position","_s","isEditMode","setIsEditMode","modalPosition","setModalPosition","baseOffset","openModals","document","querySelectorAll","length","x","y","isDragging","setIsDragging","dragStart","setDragStart","modalRef","_modalRef$current","handleClick","modals","maxZIndex","Array","from","reduce","max","modal","Math","parseInt","style","zIndex","current","addEventListener","_modalRef$current2","removeEventListener","handleMouseDown","e","target","closest","clientX","clientY","handleMouseMove","newX","newY","modalRect","getBoundingClientRect","maxX","window","innerWidth","width","maxY","innerHeight","height","min","handleMouseUp","handleDetach","modalFeatures","newWindow","open","write","location","origin","head","innerHTML","modalContent","querySelector","cloneNode","getElementById","appendChild","ref","className","left","top","cursor","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","onClick","title","fileName","_jsxFileName","lineNumber","columnNumber","Children","map","child","cloneElement","_c","$RefreshReg$"],"sources":["C:/Users/zvarn/Desktop/Projects/frontend/src/components/DraggableModal.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport './Modal.css';\r\n\r\nfunction DraggableModal({ children, onClose, position }) {\r\n  const [isEditMode, setIsEditMode] = useState(false);\r\n  const [modalPosition, setModalPosition] = useState(() => {\r\n    // Calculate initial position to cascade multiple modals\r\n    const baseOffset = 50;\r\n    const openModals = document.querySelectorAll('.modal').length;\r\n    return {\r\n      x: position?.x || baseOffset + (openModals * 20),\r\n      y: position?.y || baseOffset + (openModals * 20)\r\n    };\r\n  });\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\r\n  const modalRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    // Bring modal to front when clicked\r\n    const handleClick = () => {\r\n      const modals = document.querySelectorAll('.modal');\r\n      const maxZIndex = Array.from(modals).reduce(\r\n        (max, modal) => Math.max(max, parseInt(modal.style.zIndex || 1000)),\r\n        1000\r\n      );\r\n      if (modalRef.current) {\r\n        modalRef.current.style.zIndex = maxZIndex + 1;\r\n      }\r\n    };\r\n\r\n    modalRef.current?.addEventListener('mousedown', handleClick);\r\n    return () => modalRef.current?.removeEventListener('mousedown', handleClick);\r\n  }, []);\r\n\r\n  const handleMouseDown = (e) => {\r\n    if (e.target.closest('.modal-content')) return;\r\n    setIsDragging(true);\r\n    setDragStart({\r\n      x: e.clientX - modalPosition.x,\r\n      y: e.clientY - modalPosition.y\r\n    });\r\n  };\r\n\r\n  const handleMouseMove = (e) => {\r\n    if (!isDragging) return;\r\n    \r\n    const newX = e.clientX - dragStart.x;\r\n    const newY = e.clientY - dragStart.y;\r\n    \r\n    // Keep modal within viewport bounds\r\n    const modalRect = modalRef.current.getBoundingClientRect();\r\n    const maxX = window.innerWidth - modalRect.width;\r\n    const maxY = window.innerHeight - modalRect.height;\r\n    \r\n    setModalPosition({\r\n      x: Math.min(Math.max(0, newX), maxX),\r\n      y: Math.min(Math.max(0, newY), maxY)\r\n    });\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    setIsDragging(false);\r\n  };\r\n\r\n  const handleDetach = () => {\r\n    const modalFeatures = 'width=600,height=600,left=200,top=200';\r\n    const newWindow = window.open('', '_blank', modalFeatures);\r\n    \r\n    newWindow.document.write(`\r\n      <html>\r\n        <head>\r\n          <title>Content Details</title>\r\n          <link rel=\"stylesheet\" href=\"${window.location.origin}/modal.css\">\r\n          ${document.head.innerHTML}\r\n        </head>\r\n        <body>\r\n          <div id=\"modal-root\"></div>\r\n        </body>\r\n      </html>\r\n    `);\r\n\r\n    const modalContent = modalRef.current.querySelector('.modal-content').cloneNode(true);\r\n    newWindow.document.getElementById('modal-root').appendChild(modalContent);\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={modalRef}\r\n      className=\"modal\"\r\n      style={{\r\n        left: modalPosition.x,\r\n        top: modalPosition.y,\r\n        cursor: isDragging ? 'grabbing' : 'grab'\r\n      }}\r\n      onMouseDown={handleMouseDown}\r\n      onMouseMove={handleMouseMove}\r\n      onMouseUp={handleMouseUp}\r\n      onMouseLeave={handleMouseUp}\r\n    >\r\n      <div className=\"modal-header\">\r\n        <div className=\"modal-controls\">\r\n          <button \r\n            className=\"modal-control-button\"\r\n            onClick={() => setIsEditMode(!isEditMode)}\r\n            title={isEditMode ? \"Save\" : \"Edit\"}\r\n          >\r\n            <i className={`fas fa-${isEditMode ? 'save' : 'edit'}`}></i>\r\n          </button>\r\n          <button \r\n            className=\"modal-control-button\"\r\n            onClick={handleDetach}\r\n            title=\"Open in new window\"\r\n          >\r\n            <i className=\"fas fa-external-link-alt\"></i>\r\n          </button>\r\n          <button \r\n            className=\"modal-control-button\"\r\n            onClick={onClose}\r\n            title=\"Close\"\r\n          >\r\n            <i className=\"fas fa-times\"></i>\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div className=\"modal-content\">\r\n        {React.Children.map(children, child =>\r\n          React.cloneElement(child, { isEditMode })\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DraggableModal; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}